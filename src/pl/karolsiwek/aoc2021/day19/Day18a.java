package pl.karolsiwek.aoc2021.day19;


import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Objects;
import java.util.stream.Collectors;

public class Day18a {

    static Integer MIN_COLLIDING = 12;

    public static void main(String[] args) {

        List<Scanner> data = readPoints(testInput);
        List<Integer> sorted = new ArrayList<>();


        System.out.println("SIIIIZEEEE - " + data.size());
        List<Scanner> newData = new ArrayList<>();

        for (int i = 0; i < data.size() - 1; i++) {
            System.out.println(i + "/" + data.size());
            if (sorted.contains(data.get(i).id)) {
                continue;
            }
            boolean added = false;
            for (int j = i + 1; j < data.size(); j++) {
                if (sorted.contains(data.get(j).id)) {
                    continue;
                }

                try {
                    compareScanners(data.get(i), data.get(j));
                    if (data.get(j).toVector != null) {
                        sorted.add(data.get(j).id);
                        added = true;
                        break;
                    }
                } catch (Exception e) {
                    continue;
                }

            }
        }

        System.out.println(data.get(0).probes.size());
    }

    private static void compareScanners(Scanner a, Scanner b) {
        for (int x = 0; x < 4; x++) {
            for (int y = 0; y < 4; y++) {
                for (int z = 0; z < 4; z++) {


                    Point vector = new Point(0, 0, 0);
                    for (int i = 0; i < a.probes.size(); i++) {
                        Point probeA = a.probes.get(i);

                        for (Point probeB : b.probes) {
                            vector = new Point(probeB.x - probeA.x, probeB.y - probeA.y, probeB.z - probeA.z);
                            Integer matches = 0;
                            for (Point probeBTest : b.probes) {
                                probeBTest.move(-vector.x, -vector.y, -vector.z);

                                for (Point probeATest : a.probes) {
                                    if (probeATest.equals(probeBTest)) {
                                        matches++;
                                        if (matches >= MIN_COLLIDING) {
                                            b.rotations = Arrays.asList(x, y, z);
                                            b.vector = vector;
                                            b.toVector = a.id;
                                            return;
                                        }
                                    }
                                }
                            }

                        }
                    }
                    for (Point probe : b.probes) {
                        probe.rotX();
                    }
                }
                for (Point probe : b.probes) {
                    probe.rotY();
                }
            }
            for (Point probe : b.probes) {
                probe.rotZ();
            }
        }
        throw new IllegalStateException();
    }


    private static List<Scanner> readPoints(String testInput) {
        Integer actScanner = -1;
        List<Scanner> result = new ArrayList<>();
        List<Point> probes = new ArrayList<>();
        for (String line : testInput.split("\n")) {
            if (line.trim().isBlank()) continue;
            if (line.contains("scanner")) {

                if (!probes.isEmpty()) {
                    result.add(new Scanner(probes, (actScanner)));
                }
                actScanner++;
                probes = new ArrayList<>();
                continue;
            }


            probes.add(new Point(Arrays.stream(line.split(",")).map(Integer::parseInt).collect(Collectors.toList())));
        }

        result.add(new Scanner(probes, actScanner));
        return result;
    }

    static class Scanner {
        Integer id;
        List<Point> probes;
        Point vector = null;
        Integer toVector = null;
        List<Integer> rotations;

        public Scanner(List<Point> probes, Integer id) {
            this.probes = new ArrayList<>(probes);
            this.id = id;

        }

        public void addAllUnique(List<Point> p) {
            for (Point point : p) {
                addUnique(point);
            }
        }

        public void addUnique(Point p) {
            if (!probes.contains(p)) {
                probes.add(new Point(p));
            }
        }


        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (!(o instanceof Scanner)) return false;
            Scanner scanner = (Scanner) o;
            return scanner.id.equals(id);
        }

        @Override
        public int hashCode() {
            return Objects.hash(id);
        }
    }

    static class Point {
        Integer x, y, z;

        public Point(Integer x, Integer y, Integer z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }

        public Point(Point other) {
            this.x = other.x;
            this.y = other.y;
            this.z = other.z;
        }

        public Point(List<Integer> data) {
            this(data.get(0), data.get(1), data.get(2));
        }

        public void rotX() {
            Integer tmp = y;
            y = -z;
            z = tmp;
        }


        public void rotY() {
            Integer tmp = x;
            x = -z;
            z = tmp;
        }


        public void rotZ() {
            Integer tmp = y;
            y = -x;
            x = tmp;
        }

        public Integer dst(Point other) {
            return Math.abs(other.x - x) + Math.abs(other.y - y) + Math.abs(other.z - z);
        }

        public void move(Integer dx, Integer dy, Integer dz) {
            x += dx;
            y += dy;
            z += dz;
        }

        public String toString() {
            return x.toString() + "," + y.toString() + "," + z.toString();
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (!(o instanceof Point)) return false;
            Point point = (Point) o;
            return x.equals(point.x) && y.equals(point.y) && z.equals(point.z);
        }

        @Override
        public int hashCode() {
            return Objects.hash(x, y, z);
        }
    }

//    static String testInput = "--- scanner 0 ---\n" +
//            "0,0,1\n" +
//            "0,0,2\n" +
//            "0,0,4\n" +
//            "0,0,8\n" +
//            "--- scanner 1 ---\n" +
//            "0,1,1\n" +
//            "0,1,3\n" +
//            "0,1,4\n" +
//            "0,1,-5\n";


//    static String testInput = "--- scanner 0 ---\n" +
//            "-1,-1,1\n" +
//            "-2,-2,2\n" +
//            "-3,-3,3\n" +
//            "-2,-3,1\n" +
//            "5,6,-4\n" +
//            "8,0,7\n" +
//            "\n" +
//            "--- scanner 0 ---\n" +
//            "1,-1,1\n" +
//            "2,-2,2\n" +
//            "3,-3,3\n" +
//            "2,-1,3\n" +
//            "-5,4,-6\n" +
//            "-8,-7,0\n" +
//            "\n" +
//            "--- scanner 0 ---\n" +
//            "-1,-1,-1\n" +
//            "-2,-2,-2\n" +
//            "-3,-3,-3\n" +
//            "-1,-3,-2\n" +
//            "4,6,5\n" +
//            "-7,0,8\n" +
//            "\n" +
//            "--- scanner 0 ---\n" +
//            "1,1,-1\n" +
//            "2,2,-2\n" +
//            "3,3,-3\n" +
//            "1,3,-2\n" +
//            "-4,-6,5\n" +
//            "7,0,8\n" +
//            "\n" +
//            "--- scanner 0 ---\n" +
//            "1,1,1\n" +
//            "2,2,2\n" +
//            "3,3,3\n" +
//            "3,1,2\n" +
//            "-6,-4,-5\n" +
//            "0,7,-8";

    static String testInput = "--- scanner 0 ---\n" +
            "404,-588,-901\n" +
            "528,-643,409\n" +
            "-838,591,734\n" +
            "390,-675,-793\n" +
            "-537,-823,-458\n" +
            "-485,-357,347\n" +
            "-345,-311,381\n" +
            "-661,-816,-575\n" +
            "-876,649,763\n" +
            "-618,-824,-621\n" +
            "553,345,-567\n" +
            "474,580,667\n" +
            "-447,-329,318\n" +
            "-584,868,-557\n" +
            "544,-627,-890\n" +
            "564,392,-477\n" +
            "455,729,728\n" +
            "-892,524,684\n" +
            "-689,845,-530\n" +
            "423,-701,434\n" +
            "7,-33,-71\n" +
            "630,319,-379\n" +
            "443,580,662\n" +
            "-789,900,-551\n" +
            "459,-707,401\n" +
            "\n" +
            "--- scanner 1 ---\n" +
            "686,422,578\n" +
            "605,423,415\n" +
            "515,917,-361\n" +
            "-336,658,858\n" +
            "95,138,22\n" +
            "-476,619,847\n" +
            "-340,-569,-846\n" +
            "567,-361,727\n" +
            "-460,603,-452\n" +
            "669,-402,600\n" +
            "729,430,532\n" +
            "-500,-761,534\n" +
            "-322,571,750\n" +
            "-466,-666,-811\n" +
            "-429,-592,574\n" +
            "-355,545,-477\n" +
            "703,-491,-529\n" +
            "-328,-685,520\n" +
            "413,935,-424\n" +
            "-391,539,-444\n" +
            "586,-435,557\n" +
            "-364,-763,-893\n" +
            "807,-499,-711\n" +
            "755,-354,-619\n" +
            "553,889,-390\n" +
            "\n" +
            "--- scanner 2 ---\n" +
            "649,640,665\n" +
            "682,-795,504\n" +
            "-784,533,-524\n" +
            "-644,584,-595\n" +
            "-588,-843,648\n" +
            "-30,6,44\n" +
            "-674,560,763\n" +
            "500,723,-460\n" +
            "609,671,-379\n" +
            "-555,-800,653\n" +
            "-675,-892,-343\n" +
            "697,-426,-610\n" +
            "578,704,681\n" +
            "493,664,-388\n" +
            "-671,-858,530\n" +
            "-667,343,800\n" +
            "571,-461,-707\n" +
            "-138,-166,112\n" +
            "-889,563,-600\n" +
            "646,-828,498\n" +
            "640,759,510\n" +
            "-630,509,768\n" +
            "-681,-892,-333\n" +
            "673,-379,-804\n" +
            "-742,-814,-386\n" +
            "577,-820,562\n" +
            "\n" +
            "--- scanner 3 ---\n" +
            "-589,542,597\n" +
            "605,-692,669\n" +
            "-500,565,-823\n" +
            "-660,373,557\n" +
            "-458,-679,-417\n" +
            "-488,449,543\n" +
            "-626,468,-788\n" +
            "338,-750,-386\n" +
            "528,-832,-391\n" +
            "562,-778,733\n" +
            "-938,-730,414\n" +
            "543,643,-506\n" +
            "-524,371,-870\n" +
            "407,773,750\n" +
            "-104,29,83\n" +
            "378,-903,-323\n" +
            "-778,-728,485\n" +
            "426,699,580\n" +
            "-438,-605,-362\n" +
            "-469,-447,-387\n" +
            "509,732,623\n" +
            "647,635,-688\n" +
            "-868,-804,481\n" +
            "614,-800,639\n" +
            "595,780,-596\n" +
            "\n" +
            "--- scanner 4 ---\n" +
            "727,592,562\n" +
            "-293,-554,779\n" +
            "441,611,-461\n" +
            "-714,465,-776\n" +
            "-743,427,-804\n" +
            "-660,-479,-426\n" +
            "832,-632,460\n" +
            "927,-485,-438\n" +
            "408,393,-506\n" +
            "466,436,-512\n" +
            "110,16,151\n" +
            "-258,-428,682\n" +
            "-393,719,612\n" +
            "-211,-452,876\n" +
            "808,-476,-593\n" +
            "-575,615,604\n" +
            "-485,667,467\n" +
            "-680,325,-822\n" +
            "-627,-443,-432\n" +
            "872,-547,-609\n" +
            "833,512,582\n" +
            "807,604,487\n" +
            "839,-516,451\n" +
            "891,-625,532\n" +
            "-652,-548,-490\n" +
            "30,-46,-14";

    static String mainInput = "--- scanner 0 ---\n" +
            "-254,619,-733\n" +
            "-486,-729,544\n" +
            "807,441,685\n" +
            "-611,-859,516\n" +
            "-280,628,-633\n" +
            "-654,-760,550\n" +
            "782,-651,265\n" +
            "-779,702,594\n" +
            "792,439,689\n" +
            "858,-686,356\n" +
            "857,734,-711\n" +
            "405,-383,-473\n" +
            "-814,-443,-779\n" +
            "-5,56,-110\n" +
            "833,420,502\n" +
            "512,-465,-442\n" +
            "-790,-313,-826\n" +
            "-742,834,501\n" +
            "879,681,-656\n" +
            "115,-50,16\n" +
            "-305,681,-634\n" +
            "806,695,-591\n" +
            "-751,896,637\n" +
            "506,-384,-370\n" +
            "-672,-407,-828\n" +
            "812,-724,242\n" +
            "\n" +
            "--- scanner 1 ---\n" +
            "-385,-707,644\n" +
            "547,569,-466\n" +
            "-537,541,-637\n" +
            "-496,708,-577\n" +
            "539,780,875\n" +
            "-673,-647,-522\n" +
            "467,-678,445\n" +
            "452,-748,373\n" +
            "-522,577,-514\n" +
            "801,-707,-465\n" +
            "561,634,-393\n" +
            "504,818,809\n" +
            "-381,492,301\n" +
            "803,-711,-480\n" +
            "-603,-570,-512\n" +
            "-486,561,299\n" +
            "87,57,48\n" +
            "-415,-710,785\n" +
            "-509,-691,660\n" +
            "-638,-720,-452\n" +
            "384,744,768\n" +
            "-64,-19,-42\n" +
            "508,689,-415\n" +
            "-400,745,313\n" +
            "454,-741,583\n" +
            "822,-524,-439\n" +
            "\n" +
            "--- scanner 2 ---\n" +
            "362,-684,-471\n" +
            "-654,-602,-819\n" +
            "-883,736,292\n" +
            "673,614,-903\n" +
            "576,-259,509\n" +
            "320,927,301\n" +
            "517,898,234\n" +
            "-183,158,-129\n" +
            "414,801,255\n" +
            "-927,818,457\n" +
            "682,710,-820\n" +
            "-733,-696,-707\n" +
            "-813,709,453\n" +
            "-635,544,-442\n" +
            "780,-284,577\n" +
            "-905,-283,537\n" +
            "-132,26,16\n" +
            "-18,11,-157\n" +
            "639,-256,636\n" +
            "-940,-251,580\n" +
            "371,-532,-552\n" +
            "-864,-282,641\n" +
            "-567,690,-435\n" +
            "665,551,-745\n" +
            "-743,-709,-809\n" +
            "379,-534,-558\n" +
            "-687,634,-391\n" +
            "\n" +
            "--- scanner 3 ---\n" +
            "387,-333,-811\n" +
            "794,382,-470\n" +
            "-350,-484,733\n" +
            "-526,655,459\n" +
            "494,-302,-729\n" +
            "714,453,692\n" +
            "-504,684,-465\n" +
            "-672,690,-434\n" +
            "-629,656,-335\n" +
            "764,405,-543\n" +
            "-808,-686,-881\n" +
            "-632,687,490\n" +
            "840,496,-508\n" +
            "-832,-639,-751\n" +
            "-436,-501,702\n" +
            "595,390,657\n" +
            "594,-765,459\n" +
            "488,-230,-810\n" +
            "561,-740,480\n" +
            "632,562,616\n" +
            "-690,-688,-787\n" +
            "98,26,-130\n" +
            "-609,690,617\n" +
            "4,162,47\n" +
            "486,-757,537\n" +
            "-458,-625,736\n" +
            "\n" +
            "--- scanner 4 ---\n" +
            "726,719,-563\n" +
            "445,-551,451\n" +
            "3,11,32\n" +
            "765,689,513\n" +
            "640,-943,-584\n" +
            "830,751,617\n" +
            "83,-88,-92\n" +
            "-760,507,688\n" +
            "-388,331,-324\n" +
            "-684,466,745\n" +
            "879,770,489\n" +
            "-456,254,-360\n" +
            "447,-433,357\n" +
            "-328,-495,-804\n" +
            "639,-918,-637\n" +
            "709,741,-731\n" +
            "494,-409,487\n" +
            "-494,-547,-759\n" +
            "742,652,-774\n" +
            "-618,486,579\n" +
            "-535,-545,-828\n" +
            "-778,-708,376\n" +
            "-371,254,-342\n" +
            "540,-969,-575\n" +
            "-794,-660,444\n" +
            "-596,-720,404\n" +
            "\n" +
            "--- scanner 5 ---\n" +
            "-450,529,-435\n" +
            "-343,449,-368\n" +
            "-411,-365,-818\n" +
            "-821,-676,432\n" +
            "-682,868,691\n" +
            "-743,892,544\n" +
            "798,-426,478\n" +
            "-803,915,709\n" +
            "471,-589,-721\n" +
            "-418,-394,-827\n" +
            "-712,-538,380\n" +
            "310,902,-680\n" +
            "550,706,500\n" +
            "755,-477,564\n" +
            "-462,436,-346\n" +
            "-473,-328,-822\n" +
            "366,745,-703\n" +
            "727,-384,456\n" +
            "599,631,543\n" +
            "305,741,-681\n" +
            "534,-692,-692\n" +
            "-737,-650,448\n" +
            "56,50,-63\n" +
            "-92,-33,36\n" +
            "593,-523,-749\n" +
            "634,807,576\n" +
            "\n" +
            "--- scanner 6 ---\n" +
            "571,-840,417\n" +
            "-355,312,-834\n" +
            "-575,-725,-402\n" +
            "-636,-578,-378\n" +
            "-559,-778,741\n" +
            "706,-577,-639\n" +
            "554,-818,585\n" +
            "-630,373,296\n" +
            "657,-534,-564\n" +
            "-523,-819,815\n" +
            "640,844,564\n" +
            "473,669,-525\n" +
            "-494,382,358\n" +
            "412,647,-529\n" +
            "-343,401,-741\n" +
            "538,-751,374\n" +
            "-587,345,490\n" +
            "-724,-812,788\n" +
            "24,-96,43\n" +
            "740,870,573\n" +
            "741,-610,-463\n" +
            "641,819,511\n" +
            "417,646,-368\n" +
            "-696,-743,-355\n" +
            "143,19,-129\n" +
            "-236,334,-821\n" +
            "\n" +
            "--- scanner 7 ---\n" +
            "692,674,-596\n" +
            "-796,518,391\n" +
            "524,705,-602\n" +
            "89,-168,58\n" +
            "-734,414,456\n" +
            "-697,-873,479\n" +
            "-815,390,342\n" +
            "-765,-432,-582\n" +
            "-764,-662,495\n" +
            "-412,591,-487\n" +
            "-302,557,-519\n" +
            "399,-757,-646\n" +
            "-786,-830,512\n" +
            "-363,755,-539\n" +
            "-5,-11,-24\n" +
            "873,-736,582\n" +
            "898,-683,581\n" +
            "567,804,-568\n" +
            "-758,-459,-783\n" +
            "-724,-506,-618\n" +
            "427,-951,-689\n" +
            "924,-674,681\n" +
            "364,388,727\n" +
            "506,352,776\n" +
            "388,258,774\n" +
            "436,-889,-553\n" +
            "\n" +
            "--- scanner 8 ---\n" +
            "-483,-819,348\n" +
            "-357,-772,407\n" +
            "329,662,-347\n" +
            "471,601,-345\n" +
            "684,671,830\n" +
            "-459,729,-734\n" +
            "674,-494,738\n" +
            "633,-425,740\n" +
            "-403,424,565\n" +
            "-881,-672,-682\n" +
            "840,-449,790\n" +
            "-754,-790,-686\n" +
            "-384,465,537\n" +
            "1,-2,109\n" +
            "-728,-720,-588\n" +
            "580,-516,-549\n" +
            "853,653,801\n" +
            "33,-143,-25\n" +
            "551,-452,-463\n" +
            "777,653,839\n" +
            "501,587,-360\n" +
            "-443,510,-695\n" +
            "-494,-834,463\n" +
            "-443,598,575\n" +
            "-392,594,-746\n" +
            "541,-569,-453\n" +
            "\n" +
            "--- scanner 9 ---\n" +
            "-269,713,626\n" +
            "-549,315,-507\n" +
            "712,346,-755\n" +
            "166,48,87\n" +
            "810,-793,-445\n" +
            "551,-630,856\n" +
            "441,487,574\n" +
            "-420,-393,-717\n" +
            "830,-728,-450\n" +
            "-399,-519,417\n" +
            "790,338,-647\n" +
            "-393,-578,-656\n" +
            "-319,-596,413\n" +
            "-517,454,-393\n" +
            "769,363,-680\n" +
            "-257,696,585\n" +
            "-338,-508,453\n" +
            "481,435,650\n" +
            "451,481,620\n" +
            "105,-105,-33\n" +
            "-599,349,-486\n" +
            "543,-680,625\n" +
            "-268,832,714\n" +
            "586,-678,698\n" +
            "732,-734,-311\n" +
            "-401,-640,-743\n" +
            "\n" +
            "--- scanner 10 ---\n" +
            "-562,-785,664\n" +
            "67,-3,-4\n" +
            "-559,849,300\n" +
            "-740,824,-844\n" +
            "732,789,-674\n" +
            "795,-407,-542\n" +
            "-500,888,301\n" +
            "865,-668,798\n" +
            "584,553,281\n" +
            "1,121,-155\n" +
            "-374,-391,-514\n" +
            "-712,788,-857\n" +
            "713,763,-427\n" +
            "734,-371,-553\n" +
            "864,-580,679\n" +
            "-355,781,303\n" +
            "534,532,315\n" +
            "616,439,420\n" +
            "-813,751,-938\n" +
            "-536,-804,774\n" +
            "876,-539,662\n" +
            "740,702,-612\n" +
            "814,-367,-630\n" +
            "-425,-268,-633\n" +
            "-350,-269,-596\n" +
            "-561,-811,509\n" +
            "\n" +
            "--- scanner 11 ---\n" +
            "174,-15,-94\n" +
            "-287,-483,418\n" +
            "-365,528,547\n" +
            "-292,-538,352\n" +
            "802,434,-674\n" +
            "112,-89,93\n" +
            "-411,301,-721\n" +
            "-422,469,716\n" +
            "804,-713,-593\n" +
            "-679,-515,-505\n" +
            "-393,406,613\n" +
            "-296,-476,389\n" +
            "810,334,686\n" +
            "794,-790,-523\n" +
            "771,-987,759\n" +
            "956,226,694\n" +
            "875,-940,763\n" +
            "864,-863,-558\n" +
            "-746,-408,-425\n" +
            "834,238,702\n" +
            "679,398,-659\n" +
            "739,565,-700\n" +
            "727,-885,760\n" +
            "-768,-527,-412\n" +
            "-434,245,-878\n" +
            "-433,240,-717\n" +
            "\n" +
            "--- scanner 12 ---\n" +
            "309,-697,759\n" +
            "-124,90,-29\n" +
            "-454,627,471\n" +
            "589,-753,-296\n" +
            "747,598,928\n" +
            "650,-758,-524\n" +
            "-445,491,409\n" +
            "-384,766,-721\n" +
            "-417,534,603\n" +
            "653,546,-289\n" +
            "-846,-553,-646\n" +
            "-524,-353,418\n" +
            "35,-44,112\n" +
            "671,425,-242\n" +
            "-892,-564,-799\n" +
            "-860,-602,-586\n" +
            "-473,778,-628\n" +
            "411,-729,785\n" +
            "724,-792,-411\n" +
            "-491,-406,555\n" +
            "706,562,854\n" +
            "440,-677,729\n" +
            "506,485,-265\n" +
            "740,397,901\n" +
            "-539,-436,521\n" +
            "-406,885,-708\n" +
            "\n" +
            "--- scanner 13 ---\n" +
            "883,-434,-802\n" +
            "-633,721,-335\n" +
            "598,-683,406\n" +
            "-311,576,666\n" +
            "480,-659,504\n" +
            "-490,-681,527\n" +
            "628,534,777\n" +
            "-346,653,537\n" +
            "-410,-734,-635\n" +
            "789,-491,-825\n" +
            "644,482,-707\n" +
            "729,-438,-795\n" +
            "-643,771,-432\n" +
            "571,484,-664\n" +
            "147,-65,-35\n" +
            "613,469,672\n" +
            "-550,-666,679\n" +
            "-487,-655,-542\n" +
            "16,0,114\n" +
            "-693,687,-281\n" +
            "510,-745,363\n" +
            "-437,-673,550\n" +
            "-345,563,745\n" +
            "688,514,655\n" +
            "-514,-739,-636\n" +
            "413,532,-699\n" +
            "\n" +
            "--- scanner 14 ---\n" +
            "815,593,506\n" +
            "490,-765,493\n" +
            "-739,-898,-828\n" +
            "-752,-920,-709\n" +
            "-497,600,625\n" +
            "-830,-412,621\n" +
            "-571,652,-523\n" +
            "-641,642,-446\n" +
            "387,-780,410\n" +
            "572,-887,-477\n" +
            "835,684,-382\n" +
            "-677,-458,610\n" +
            "440,-850,-570\n" +
            "-659,-831,-721\n" +
            "-378,640,611\n" +
            "-400,630,566\n" +
            "-606,712,-373\n" +
            "854,725,-569\n" +
            "40,-82,145\n" +
            "524,-813,463\n" +
            "855,598,636\n" +
            "833,699,-386\n" +
            "378,-859,-434\n" +
            "804,517,564\n" +
            "-617,-444,659\n" +
            "\n" +
            "--- scanner 15 ---\n" +
            "658,-585,-536\n" +
            "-278,682,382\n" +
            "56,-5,-82\n" +
            "516,-608,-461\n" +
            "803,504,406\n" +
            "520,-578,-410\n" +
            "885,773,-453\n" +
            "-628,-753,582\n" +
            "977,821,-570\n" +
            "-484,720,-679\n" +
            "-341,707,-731\n" +
            "539,-446,699\n" +
            "-370,-382,-725\n" +
            "573,-398,729\n" +
            "-781,-799,571\n" +
            "777,402,438\n" +
            "-372,-602,-801\n" +
            "-425,-546,-750\n" +
            "-568,-767,533\n" +
            "-506,743,377\n" +
            "824,826,-596\n" +
            "-393,817,343\n" +
            "-418,802,-717\n" +
            "747,533,458\n" +
            "436,-431,782\n" +
            "\n" +
            "--- scanner 16 ---\n" +
            "-382,323,350\n" +
            "-476,300,407\n" +
            "-656,-563,666\n" +
            "669,-448,602\n" +
            "721,-545,-853\n" +
            "-413,-524,-727\n" +
            "-449,-463,-738\n" +
            "-536,330,354\n" +
            "667,-363,710\n" +
            "454,705,-518\n" +
            "90,-24,-73\n" +
            "788,503,815\n" +
            "-852,426,-616\n" +
            "-75,-113,19\n" +
            "-741,-503,817\n" +
            "-621,418,-566\n" +
            "449,685,-453\n" +
            "703,-488,765\n" +
            "719,559,774\n" +
            "-756,-586,627\n" +
            "-409,-444,-650\n" +
            "660,-518,-668\n" +
            "582,442,799\n" +
            "747,-526,-606\n" +
            "315,607,-512\n" +
            "-694,461,-568\n" +
            "\n" +
            "--- scanner 17 ---\n" +
            "-515,-462,857\n" +
            "790,-685,519\n" +
            "-354,578,-320\n" +
            "763,-735,-688\n" +
            "393,408,537\n" +
            "530,464,475\n" +
            "764,-587,589\n" +
            "-826,-825,-379\n" +
            "14,84,113\n" +
            "119,-22,1\n" +
            "391,369,-721\n" +
            "-686,-795,-430\n" +
            "708,-747,-794\n" +
            "-804,791,860\n" +
            "-536,566,-348\n" +
            "-597,741,884\n" +
            "-544,-548,793\n" +
            "-505,-452,740\n" +
            "-805,-706,-362\n" +
            "917,-681,637\n" +
            "519,349,490\n" +
            "427,548,-773\n" +
            "715,-700,-630\n" +
            "-638,739,815\n" +
            "-338,626,-388\n" +
            "497,415,-704\n" +
            "\n" +
            "--- scanner 18 ---\n" +
            "535,-556,-635\n" +
            "775,624,-831\n" +
            "-636,-911,432\n" +
            "-699,504,767\n" +
            "330,-620,548\n" +
            "-638,-771,580\n" +
            "-660,-416,-820\n" +
            "-708,476,515\n" +
            "-56,-43,3\n" +
            "780,625,-670\n" +
            "451,-632,-736\n" +
            "-665,-664,436\n" +
            "614,665,660\n" +
            "-576,-573,-797\n" +
            "287,-534,497\n" +
            "-634,484,689\n" +
            "-479,325,-441\n" +
            "719,647,-674\n" +
            "492,693,594\n" +
            "-170,45,131\n" +
            "358,-512,455\n" +
            "-627,-398,-835\n" +
            "551,636,763\n" +
            "-572,334,-423\n" +
            "-403,363,-441\n" +
            "486,-599,-560\n" +
            "\n" +
            "--- scanner 19 ---\n" +
            "-530,724,-458\n" +
            "-536,382,731\n" +
            "695,276,943\n" +
            "686,-872,419\n" +
            "296,-611,-759\n" +
            "-419,392,721\n" +
            "-121,3,25\n" +
            "474,562,-439\n" +
            "-416,-861,432\n" +
            "457,-610,-764\n" +
            "-483,478,692\n" +
            "620,289,771\n" +
            "-583,-438,-535\n" +
            "453,-588,-703\n" +
            "634,274,801\n" +
            "57,-138,154\n" +
            "-392,-811,639\n" +
            "-461,-809,598\n" +
            "-569,673,-578\n" +
            "515,502,-606\n" +
            "-645,-387,-436\n" +
            "704,-901,588\n" +
            "500,625,-570\n" +
            "686,-910,495\n" +
            "-583,746,-513\n" +
            "-636,-413,-536\n" +
            "\n" +
            "--- scanner 20 ---\n" +
            "-639,-437,561\n" +
            "-616,-385,619\n" +
            "-752,797,-468\n" +
            "-382,-845,-641\n" +
            "-590,493,529\n" +
            "849,672,763\n" +
            "889,758,-497\n" +
            "908,717,-469\n" +
            "-547,-391,632\n" +
            "416,-476,634\n" +
            "-610,387,699\n" +
            "73,45,37\n" +
            "-476,-830,-543\n" +
            "387,-347,649\n" +
            "833,453,802\n" +
            "849,584,-507\n" +
            "900,588,814\n" +
            "635,-597,-452\n" +
            "442,-387,630\n" +
            "-672,795,-359\n" +
            "-528,434,601\n" +
            "755,-571,-361\n" +
            "-425,-700,-531\n" +
            "-709,827,-340\n" +
            "730,-508,-471\n" +
            "\n" +
            "--- scanner 21 ---\n" +
            "597,566,-444\n" +
            "-555,-442,330\n" +
            "611,596,-459\n" +
            "-411,643,589\n" +
            "-581,-562,421\n" +
            "-371,-755,-661\n" +
            "-492,-467,440\n" +
            "97,23,-142\n" +
            "527,779,731\n" +
            "-331,-810,-680\n" +
            "76,163,1\n" +
            "-645,724,-648\n" +
            "545,872,740\n" +
            "-663,652,561\n" +
            "600,-348,476\n" +
            "545,948,702\n" +
            "688,-348,-794\n" +
            "-585,717,581\n" +
            "469,-364,-833\n" +
            "-531,628,-575\n" +
            "604,-297,-845\n" +
            "536,424,-446\n" +
            "-567,639,-628\n" +
            "774,-308,466\n" +
            "-460,-781,-665\n" +
            "733,-289,438\n" +
            "\n" +
            "--- scanner 22 ---\n" +
            "685,365,-686\n" +
            "-525,-603,382\n" +
            "596,395,-727\n" +
            "-564,-723,433\n" +
            "-531,586,724\n" +
            "520,-751,604\n" +
            "383,-547,-346\n" +
            "-658,580,-678\n" +
            "625,626,817\n" +
            "-556,-512,-908\n" +
            "700,798,830\n" +
            "-478,547,628\n" +
            "-578,-658,360\n" +
            "-83,-86,-24\n" +
            "505,-715,481\n" +
            "-401,-548,-801\n" +
            "18,41,-100\n" +
            "-592,552,-864\n" +
            "-414,576,714\n" +
            "639,656,832\n" +
            "469,-731,-332\n" +
            "364,-800,-334\n" +
            "-549,594,-802\n" +
            "479,-584,544\n" +
            "-521,-474,-842\n" +
            "584,296,-593\n" +
            "\n" +
            "--- scanner 23 ---\n" +
            "773,789,374\n" +
            "715,-317,-357\n" +
            "-441,586,-402\n" +
            "-553,-452,574\n" +
            "-556,-579,597\n" +
            "739,-263,-352\n" +
            "-473,620,-292\n" +
            "822,825,516\n" +
            "437,659,-786\n" +
            "39,130,34\n" +
            "502,763,-724\n" +
            "-804,-597,-372\n" +
            "-522,373,577\n" +
            "-550,503,702\n" +
            "759,-698,748\n" +
            "388,787,-805\n" +
            "722,-264,-384\n" +
            "820,919,398\n" +
            "153,-18,117\n" +
            "-493,422,-353\n" +
            "-806,-357,-339\n" +
            "-812,-382,-410\n" +
            "-521,-421,680\n" +
            "618,-695,856\n" +
            "-556,472,534\n" +
            "635,-664,770\n" +
            "\n" +
            "--- scanner 24 ---\n" +
            "668,-697,471\n" +
            "-743,805,518\n" +
            "-640,783,504\n" +
            "362,-783,-510\n" +
            "-72,-14,21\n" +
            "826,465,271\n" +
            "-545,-591,754\n" +
            "-653,-531,-578\n" +
            "-710,-680,726\n" +
            "-643,-638,822\n" +
            "808,498,286\n" +
            "592,-613,370\n" +
            "-574,-643,-484\n" +
            "625,-648,546\n" +
            "-842,233,-656\n" +
            "772,314,-917\n" +
            "384,-800,-678\n" +
            "849,382,-881\n" +
            "-862,384,-702\n" +
            "651,414,309\n" +
            "55,-151,-57\n" +
            "-713,742,390\n" +
            "451,-816,-467\n" +
            "849,297,-899\n" +
            "-819,368,-743\n" +
            "-564,-541,-471\n" +
            "\n" +
            "--- scanner 25 ---\n" +
            "-706,-813,685\n" +
            "98,0,61\n" +
            "-475,-742,-701\n" +
            "-814,-959,693\n" +
            "735,-469,-555\n" +
            "-802,-837,701\n" +
            "607,-658,701\n" +
            "-800,430,-718\n" +
            "-571,419,715\n" +
            "-606,-805,-675\n" +
            "459,730,-489\n" +
            "552,721,-471\n" +
            "679,551,719\n" +
            "-512,362,546\n" +
            "688,579,467\n" +
            "-795,431,-879\n" +
            "383,692,-489\n" +
            "-642,-682,-660\n" +
            "692,-638,623\n" +
            "765,-454,-541\n" +
            "703,-585,587\n" +
            "614,571,641\n" +
            "-739,408,-722\n" +
            "907,-456,-480\n" +
            "161,-133,-93\n" +
            "-634,390,612\n" +
            "\n" +
            "--- scanner 26 ---\n" +
            "-659,-489,657\n" +
            "-732,-491,614\n" +
            "-823,652,-554\n" +
            "-574,431,745\n" +
            "750,892,572\n" +
            "-705,676,-456\n" +
            "-110,0,-129\n" +
            "-615,-521,-705\n" +
            "462,708,-601\n" +
            "427,756,-543\n" +
            "-420,427,752\n" +
            "277,-435,468\n" +
            "416,-441,370\n" +
            "337,-833,-852\n" +
            "-890,-539,649\n" +
            "681,851,516\n" +
            "367,-693,-801\n" +
            "544,876,633\n" +
            "411,-376,390\n" +
            "-675,-541,-827\n" +
            "-690,-476,-722\n" +
            "-514,484,775\n" +
            "456,-812,-869\n" +
            "415,701,-437\n" +
            "-793,738,-413\n" +
            "-7,141,-31\n" +
            "\n" +
            "--- scanner 27 ---\n" +
            "572,353,841\n" +
            "-339,-700,406\n" +
            "12,57,81\n" +
            "907,705,-751\n" +
            "644,325,809\n" +
            "-794,-701,-378\n" +
            "593,-488,-622\n" +
            "-447,735,-487\n" +
            "-524,785,476\n" +
            "414,-403,408\n" +
            "-322,754,-393\n" +
            "-463,751,-363\n" +
            "72,-91,-45\n" +
            "676,311,789\n" +
            "452,-550,334\n" +
            "-232,-736,561\n" +
            "780,839,-721\n" +
            "-662,722,489\n" +
            "509,-439,-648\n" +
            "-806,-448,-359\n" +
            "749,747,-694\n" +
            "454,-453,349\n" +
            "-734,792,474\n" +
            "-298,-774,526\n" +
            "-808,-517,-464\n" +
            "446,-477,-709\n" +
            "\n" +
            "--- scanner 28 ---\n" +
            "-491,-629,-453\n" +
            "-583,-640,672\n" +
            "-489,-551,-496\n" +
            "-783,756,-453\n" +
            "852,-485,-746\n" +
            "646,679,642\n" +
            "742,626,681\n" +
            "745,-567,-777\n" +
            "378,579,-563\n" +
            "369,-493,360\n" +
            "-890,601,-417\n" +
            "-824,636,-379\n" +
            "451,593,-628\n" +
            "-784,608,689\n" +
            "-658,-623,717\n" +
            "80,-140,-1\n" +
            "-643,-518,652\n" +
            "-660,499,675\n" +
            "-7,-5,137\n" +
            "732,743,671\n" +
            "400,632,-508\n" +
            "-846,565,647\n" +
            "751,-486,-849\n" +
            "399,-544,500\n" +
            "488,-476,381\n" +
            "-563,-649,-521\n" +
            "\n" +
            "--- scanner 29 ---\n" +
            "-630,722,-554\n" +
            "-97,-7,20\n" +
            "693,686,710\n" +
            "803,652,678\n" +
            "-815,-593,-528\n" +
            "742,850,658\n" +
            "381,-411,579\n" +
            "-537,644,689\n" +
            "-423,753,685\n" +
            "778,-506,-680\n" +
            "-527,713,-484\n" +
            "-410,-316,562\n" +
            "-486,-347,501\n" +
            "347,-364,414\n" +
            "676,-480,-712\n" +
            "-467,671,850\n" +
            "-714,683,-420\n" +
            "-445,-348,605\n" +
            "-695,-645,-591\n" +
            "652,632,-439\n" +
            "-870,-681,-520\n" +
            "647,-536,-660\n" +
            "710,521,-439\n" +
            "720,561,-493\n" +
            "340,-337,615\n" +
            "\n" +
            "--- scanner 30 ---\n" +
            "-629,628,-636\n" +
            "124,-147,157\n" +
            "850,-817,756\n" +
            "-27,-79,-34\n" +
            "-679,-520,-392\n" +
            "-287,-441,830\n" +
            "-685,-381,-490\n" +
            "594,491,674\n" +
            "-427,-471,779\n" +
            "-581,786,-671\n" +
            "484,580,-741\n" +
            "-744,-515,-412\n" +
            "387,-717,-432\n" +
            "536,504,-781\n" +
            "569,417,772\n" +
            "-644,586,700\n" +
            "395,-825,-510\n" +
            "-599,511,683\n" +
            "819,-924,838\n" +
            "530,550,-771\n" +
            "922,-823,837\n" +
            "-631,555,-679\n" +
            "-579,571,805\n" +
            "526,419,694\n" +
            "412,-750,-453\n" +
            "-308,-560,847\n" +
            "\n" +
            "--- scanner 31 ---\n" +
            "654,704,-644\n" +
            "-939,552,-557\n" +
            "284,-417,580\n" +
            "477,-370,-775\n" +
            "-515,-482,-510\n" +
            "553,812,632\n" +
            "-808,572,-587\n" +
            "-881,739,510\n" +
            "-99,60,-31\n" +
            "-568,-339,-449\n" +
            "386,-393,522\n" +
            "366,748,662\n" +
            "447,-393,-880\n" +
            "-813,793,581\n" +
            "371,-463,733\n" +
            "469,678,671\n" +
            "-837,520,-531\n" +
            "534,641,-696\n" +
            "-813,-550,817\n" +
            "-773,-417,727\n" +
            "-771,-428,683\n" +
            "709,712,-732\n" +
            "438,-303,-910\n" +
            "-871,793,470\n" +
            "-520,-456,-357\n" +
            "\n" +
            "--- scanner 32 ---\n" +
            "573,-915,546\n" +
            "-489,-355,592\n" +
            "-598,414,-575\n" +
            "537,-773,497\n" +
            "530,-664,-742\n" +
            "-565,705,734\n" +
            "513,304,852\n" +
            "572,757,-394\n" +
            "158,24,149\n" +
            "-673,-777,-442\n" +
            "-604,756,614\n" +
            "-718,-829,-276\n" +
            "-651,510,-536\n" +
            "-742,-779,-483\n" +
            "96,-91,-28\n" +
            "-498,-381,692\n" +
            "443,-891,499\n" +
            "490,-604,-544\n" +
            "521,787,-254\n" +
            "-551,778,669\n" +
            "514,405,955\n" +
            "462,-616,-726\n" +
            "504,668,-275\n" +
            "-715,424,-565\n" +
            "595,411,883\n" +
            "-551,-406,691\n" +
            "\n" +
            "--- scanner 33 ---\n" +
            "-640,600,-495\n" +
            "725,-844,644\n" +
            "691,-904,-428\n" +
            "-634,-912,440\n" +
            "-617,542,-443\n" +
            "128,-7,27\n" +
            "-826,-468,-849\n" +
            "2,-123,-33\n" +
            "-779,-454,-655\n" +
            "773,-848,-474\n" +
            "415,527,-534\n" +
            "-591,632,435\n" +
            "624,-825,690\n" +
            "832,359,395\n" +
            "848,398,614\n" +
            "-829,-418,-712\n" +
            "630,-846,839\n" +
            "441,531,-445\n" +
            "386,512,-405\n" +
            "-548,529,-449\n" +
            "735,-945,-603\n" +
            "899,347,530\n" +
            "-529,560,376\n" +
            "-685,-841,398\n" +
            "-730,-860,525\n" +
            "-611,462,329\n" +
            "\n" +
            "--- scanner 34 ---\n" +
            "-760,-822,-576\n" +
            "533,-563,-395\n" +
            "-901,-792,-662\n" +
            "436,478,-707\n" +
            "774,701,598\n" +
            "710,615,627\n" +
            "596,-877,622\n" +
            "616,-551,-415\n" +
            "-771,428,-680\n" +
            "-445,457,888\n" +
            "-858,-704,-600\n" +
            "657,711,588\n" +
            "-85,-24,28\n" +
            "554,482,-834\n" +
            "-462,338,909\n" +
            "506,576,-681\n" +
            "639,-815,580\n" +
            "-609,-614,597\n" +
            "530,-691,594\n" +
            "-513,368,769\n" +
            "-592,-689,552\n" +
            "521,-581,-371\n" +
            "-487,-674,617\n" +
            "-713,463,-632\n" +
            "-877,416,-625\n" +
            "\n" +
            "--- scanner 35 ---\n" +
            "898,-575,633\n" +
            "876,-630,580\n" +
            "-261,-552,686\n" +
            "811,770,875\n" +
            "-723,582,480\n" +
            "-8,-34,145\n" +
            "-704,431,-619\n" +
            "-235,-652,695\n" +
            "-459,-329,-246\n" +
            "-458,-324,-407\n" +
            "769,706,-601\n" +
            "-286,-553,633\n" +
            "-436,-385,-403\n" +
            "839,779,-566\n" +
            "162,109,80\n" +
            "-760,675,612\n" +
            "-793,443,-712\n" +
            "-771,324,-699\n" +
            "714,-649,-424\n" +
            "779,629,-531\n" +
            "826,766,873\n" +
            "654,-482,-465\n" +
            "-732,718,418\n" +
            "777,-518,-450\n" +
            "825,-510,619\n" +
            "852,583,894\n" +
            "\n" +
            "--- scanner 36 ---\n" +
            "-379,-490,-640\n" +
            "-406,-497,-841\n" +
            "711,273,-570\n" +
            "-84,-168,35\n" +
            "-816,457,696\n" +
            "-803,467,594\n" +
            "443,-440,284\n" +
            "-609,-491,437\n" +
            "602,387,-566\n" +
            "437,565,329\n" +
            "-709,546,706\n" +
            "610,-953,-577\n" +
            "527,513,278\n" +
            "629,317,-405\n" +
            "-820,-558,421\n" +
            "808,-892,-597\n" +
            "467,-521,398\n" +
            "-453,-531,-676\n" +
            "-358,260,-693\n" +
            "583,633,322\n" +
            "644,-843,-545\n" +
            "571,-459,333\n" +
            "36,-94,-126\n" +
            "-390,295,-650\n" +
            "-389,336,-754\n" +
            "-777,-469,454\n" +
            "\n" +
            "--- scanner 37 ---\n" +
            "-593,283,-862\n" +
            "694,490,-417\n" +
            "-688,611,438\n" +
            "-540,-467,-841\n" +
            "-16,22,74\n" +
            "689,-709,613\n" +
            "699,559,889\n" +
            "554,-446,-443\n" +
            "-741,-474,-814\n" +
            "796,480,-404\n" +
            "640,-752,538\n" +
            "-625,628,598\n" +
            "-713,-543,329\n" +
            "-592,-561,376\n" +
            "151,-117,-27\n" +
            "537,-468,-611\n" +
            "521,-535,-400\n" +
            "746,461,821\n" +
            "-653,-708,352\n" +
            "-550,318,-830\n" +
            "-654,359,-831\n" +
            "-576,-508,-767\n" +
            "724,-676,437\n" +
            "-498,591,466\n" +
            "806,569,-511\n" +
            "657,626,793";
}
